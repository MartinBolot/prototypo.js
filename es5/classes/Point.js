define([], function() {
  "use strict";
  var Point = function Point(x, y) {
    if (!(this instanceof $Point)) {
      return new $Point(x, y);
    }
    if (x === undefined || x === null) {
      this.coords = new Float32Array([x, y]);
    } else if (x.constructor === Array || x.constructor === Float32Array) {
      this.coords = new Float32Array(x);
    } else if (typeof x === 'object' && ('x' in x || 'y' in x)) {
      this.coords = new Float32Array([x.x, x.y]);
    } else {
      this.coords = new Float32Array([x, y]);
    }
  };
  var $Point = Point;
  ($traceurRuntime.createClass)(Point, {
    get x() {
      return this.coords[0];
    },
    set x(x) {
      this.coords[0] = x;
    },
    get y() {
      return this.coords[1];
    },
    set y(y) {
      this.coords[1] = y;
    },
    _: function(x, y) {
      if (x === undefined || x === null) {
        this.coords[0] = x;
        this.coords[1] = y;
      } else if (x.constructor === Array || x.constructor === Float32Array) {
        this.coords[0] = x[0];
        this.coords[1] = x[1];
      } else if (typeof x === 'object' && ('x' in x || 'y' in x)) {
        this.coords[0] = x.x;
        this.coords[1] = x.y;
      } else {
        this.coords[0] = x;
        this.coords[1] = y;
      }
      return this;
    },
    translate: function(x, y) {
      var p = x instanceof $Point ? x : new $Point(x, y);
      if (!isNaN(p.coords[0])) {
        this.coords[0] += p.coords[0];
      }
      if (!isNaN(p.coords[1])) {
        this.coords[1] += p.coords[1];
      }
      return this;
    },
    translateX: function(x) {
      this.coords[0] += x;
      return this;
    },
    translateY: function(y) {
      this.coords[1] += y;
      return this;
    },
    transform: function(m, isRecursive) {
      var coords0 = this.coords[0];
      if (m.constructor === Float32Array) {
        this.coords[0] = m[0] * coords0 + m[2] * this.coords[1] + m[4];
        this.coords[1] = m[1] * coords0 + m[3] * this.coords[1] + m[5];
      } else {
        this.coords[0] = m.a * coords0 + m.c * this.coords[1] + m.e;
        this.coords[1] = m.b * coords0 + m.d * this.coords[1] + m.f;
      }
      if (isRecursive && this.children) {
        this.children.forEach((function(child) {
          return child.transform(m, isRecursive);
        }));
      }
      return this;
    },
    toString: function() {
      return (isNaN(this.coords[0]) ? 'NaN' : Math.round(this.coords[0])) + ' ' + (isNaN(this.coords[1]) ? 'NaN' : Math.round(this.coords[1]));
    },
    toJSON: function() {
      return this.toString();
    }
  }, {});
  var $__default = Point;
  return {
    get default() {
      return $__default;
    },
    __esModule: true
  };
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8yIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzEiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvNiIsImNsYXNzZXMvUG9pbnQuanMiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvMTEiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvNyIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci8zIiwiQHRyYWNldXIvZ2VuZXJhdGVkL1RlbXBsYXRlUGFyc2VyLzAiLCJAdHJhY2V1ci9nZW5lcmF0ZWQvVGVtcGxhdGVQYXJzZXIvNCIsIkB0cmFjZXVyL2dlbmVyYXRlZC9UZW1wbGF0ZVBhcnNlci81Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEtBQUssQUFBQyxJQ0FOLFVBQVMsQUFBZ0I7O0FDQXpCLEFBQUksSUFBQSxRQ0FKLFNBQU0sTUFBSSxDQUVJLENBQUEsQ0FBRyxDQUFBLENBQUEsQ0FBSTtBQUVuQixPQUFLLENBQUMsQ0FBRSxJQUFHLGtCQUFpQixDQUFFLENBQUk7QUFDakMsV0FBTyxXQUFTLENBQUUsQ0FBQSxDQUFHLEVBQUEsQ0FBRSxDQUFDO0lBQ3pCO0FBQUEsQUFFQSxPQUFLLENBQUEsSUFBTSxVQUFRLENBQUEsRUFBSyxDQUFBLENBQUEsSUFBTSxLQUFHLENBQUk7QUFDcEMsU0FBRyxPQUFPLEVBQUksSUFBSSxhQUFXLEFBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBRyxFQUFBLENBQUMsQ0FBQyxDQUFDO0lBRXZDLEtBQU8sS0FBSyxDQUFBLFlBQVksSUFBTSxNQUFJLENBQUEsRUFBSyxDQUFBLENBQUEsWUFBWSxJQUFNLGFBQVcsQ0FBSTtBQUN2RSxTQUFHLE9BQU8sRUFBSSxJQUFJLGFBQVcsQUFBQyxDQUFDLENBQUEsQ0FBQyxDQUFDO0lBRWxDLEtBQU8sS0FBSyxNQUFPLEVBQUEsQ0FBQSxHQUFNLFNBQU8sQ0FBQSxFQUFLLEVBQUUsR0FBRSxHQUFLLEVBQUEsQ0FBQSxFQUFLLENBQUEsR0FBRSxHQUFLLEVBQUEsQ0FBRSxDQUFJO0FBQy9ELFNBQUcsT0FBTyxFQUFJLElBQUksYUFBVyxBQUFDLENBQUMsQ0FBQyxDQUFBLEVBQUUsQ0FBRyxDQUFBLENBQUEsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUUzQyxLQUFPO0FBQ04sU0FBRyxPQUFPLEVBQUksSUFBSSxhQUFXLEFBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBRyxFQUFBLENBQUMsQ0FBQyxDQUFDO0lBRXZDO0FBQUEsRURwQnNDLEFDcUJ2QyxDRHJCdUM7QUVBeEMsQUFBSSxJQUFBLGVBQW9DLENBQUE7QUNBeEMsRUFBQyxlQUFjLFlBQVksQ0FBQyxBQUFDO0FGd0I1QixNQUFJLEVBQUEsRUFBSTtBQUNQLFdBQU8sQ0FBQSxJQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsQ0FBQztJQUN0QjtBQUNBLE1BQUksRUFBQSxDQUFHLENBQUEsQ0FBSTtBQUNWLFNBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLEVBQUEsQ0FBQztJQUNuQjtBQUNBLE1BQUksRUFBQSxFQUFJO0FBQ1AsV0FBTyxDQUFBLElBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxDQUFDO0lBQ3RCO0FBQ0EsTUFBSSxFQUFBLENBQUcsQ0FBQSxDQUFJO0FBQ1YsU0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEVBQUksRUFBQSxDQUFDO0lBQ25CO0FBR0EsSUFBQSxDQUFBLFVBQUUsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFHO0FBQ1AsU0FBSyxDQUFBLElBQU0sVUFBUSxDQUFBLEVBQUssQ0FBQSxDQUFBLElBQU0sS0FBRyxDQUFJO0FBQ3BDLFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLEVBQUEsQ0FBQztBQUNsQixXQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsRUFBSSxFQUFBLENBQUM7TUFFbkIsS0FBTyxLQUFLLENBQUEsWUFBWSxJQUFNLE1BQUksQ0FBQSxFQUFLLENBQUEsQ0FBQSxZQUFZLElBQU0sYUFBVyxDQUFJO0FBQ3ZFLFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsQ0FBQSxDQUFFLENBQUEsQ0FBQyxDQUFDO0FBQ3JCLFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsQ0FBQSxDQUFFLENBQUEsQ0FBQyxDQUFDO01BRXRCLEtBQU8sS0FBSyxNQUFPLEVBQUEsQ0FBQSxHQUFNLFNBQU8sQ0FBQSxFQUFLLEVBQUUsR0FBRSxHQUFLLEVBQUEsQ0FBQSxFQUFLLENBQUEsR0FBRSxHQUFLLEVBQUEsQ0FBRSxDQUFJO0FBQy9ELFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsQ0FBQSxFQUFFLENBQUM7QUFDcEIsV0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEVBQUksQ0FBQSxDQUFBLEVBQUUsQ0FBQztNQUVyQixLQUFPO0FBQ04sV0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEVBQUksRUFBQSxDQUFDO0FBQ2xCLFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLEVBQUEsQ0FBQztNQUVuQjtBQUFBLEFBRUEsV0FBTyxLQUFHLENBQUM7SUFDWjtBQUVBLFlBQVEsQ0FBUixVQUFXLENBQUEsQ0FBRyxDQUFBLENBQUEsQ0FBSTtBQUNqQixBQUFJLFFBQUEsQ0FBQSxDQUFBLEVBQUksQ0FBQSxDQUFBLGtCQUFpQixFQUN2QixFQUFBLEVBQ0EsV0FBUyxDQUFFLENBQUEsQ0FBRyxFQUFBLENBQUUsQ0FBQztBQUVuQixTQUFLLENBQUMsS0FBSSxBQUFDLENBQUUsQ0FBQSxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUUsQ0FBSTtBQUM1QixXQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsR0FBSyxDQUFBLENBQUEsT0FBTyxDQUFFLENBQUEsQ0FBQyxDQUFDO01BQzlCO0FBQUEsQUFDQSxTQUFLLENBQUMsS0FBSSxBQUFDLENBQUUsQ0FBQSxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUUsQ0FBSTtBQUM1QixXQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsR0FBSyxDQUFBLENBQUEsT0FBTyxDQUFFLENBQUEsQ0FBQyxDQUFDO01BQzlCO0FBQUEsQUFFQSxXQUFPLEtBQUcsQ0FBQztJQUNaO0FBRUEsYUFBUyxDQUFULFVBQVksQ0FBQSxDQUFJO0FBQ2YsU0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEdBQUssRUFBQSxDQUFDO0FBQ25CLFdBQU8sS0FBRyxDQUFDO0lBQ1o7QUFFQSxhQUFTLENBQVQsVUFBWSxDQUFBLENBQUk7QUFDZixTQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsR0FBSyxFQUFBLENBQUM7QUFDbkIsV0FBTyxLQUFHLENBQUM7SUFDWjtBQUVBLFlBQVEsQ0FBUixVQUFXLENBQUEsQ0FBRyxDQUFBLFdBQVU7QUFDdkIsQUFBSSxRQUFBLENBQUEsT0FBTSxFQUFJLENBQUEsSUFBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUM7QUFFNUIsU0FBSyxDQUFBLFlBQVksSUFBTSxhQUFXLENBQUk7QUFDckMsV0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEVBQUksQ0FBQSxDQUFBLENBQUUsQ0FBQSxDQUFDLEVBQUksUUFBTSxDQUFBLENBQUksQ0FBQSxDQUFBLENBQUUsQ0FBQSxDQUFDLEVBQUksQ0FBQSxJQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsQ0FBQSxDQUFJLENBQUEsQ0FBQSxDQUFFLENBQUEsQ0FBQyxDQUFDO0FBQzlELFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsQ0FBQSxDQUFFLENBQUEsQ0FBQyxFQUFJLFFBQU0sQ0FBQSxDQUFJLENBQUEsQ0FBQSxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsSUFBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUEsQ0FBSSxDQUFBLENBQUEsQ0FBRSxDQUFBLENBQUMsQ0FBQztNQUcvRCxLQUFPO0FBQ04sV0FBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLEVBQUksQ0FBQSxDQUFBLEVBQUUsRUFBSSxRQUFNLENBQUEsQ0FBSSxDQUFBLENBQUEsRUFBRSxFQUFJLENBQUEsSUFBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUEsQ0FBSSxDQUFBLENBQUEsRUFBRSxDQUFDO0FBQzNELFdBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxFQUFJLENBQUEsQ0FBQSxFQUFFLEVBQUksUUFBTSxDQUFBLENBQUksQ0FBQSxDQUFBLEVBQUUsRUFBSSxDQUFBLElBQUcsT0FBTyxDQUFFLENBQUEsQ0FBQyxDQUFBLENBQUksQ0FBQSxDQUFBLEVBQUUsQ0FBQztNQUM1RDtBQUFBLEFBRUEsU0FBSyxXQUFVLEdBQUssQ0FBQSxJQUFHLFNBQVMsQ0FBSTtBQUNuQyxXQUFHLFNBQVMsUUFBUSxBQUFDLEVBQUUsU0FBQSxLQUFJO2VBQUssQ0FBQSxLQUFJLFVBQVUsQUFBQyxDQUFFLENBQUEsQ0FBRyxZQUFVLENBQUU7UUFBQSxFQUFFLENBQUM7TUFDcEU7QUFBQSxBQUVBLFdBQU8sS0FBRyxDQUFDO0lBQ1o7QUFFQSxXQUFPLENBQVAsVUFBUSxBQUFDLENBQUU7QUFDVixXQUFPLENBQUEsQ0FBRSxLQUFJLEFBQUMsQ0FBRSxJQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsQ0FBRSxDQUFBLENBQUksTUFBSSxFQUFJLENBQUEsSUFBRyxNQUFNLEFBQUMsQ0FBRSxJQUFHLE9BQU8sQ0FBRSxDQUFBLENBQUMsQ0FBRSxDQUFFLEVBQ3ZFLElBQUUsQ0FBQSxDQUNGLEVBQUUsS0FBSSxBQUFDLENBQUUsSUFBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUUsQ0FBQSxDQUFJLE1BQUksRUFBSSxDQUFBLElBQUcsTUFBTSxBQUFDLENBQUUsSUFBRyxPQUFPLENBQUUsQ0FBQSxDQUFDLENBQUUsQ0FBRSxDQUFDO0lBQ3BFO0FBRUEsU0FBSyxDQUFMLFVBQU0sQUFBQyxDQUFFO0FBQ1IsV0FBTyxDQUFBLElBQUcsU0FBUyxBQUFDLEVBQUMsQ0FBQztJQUN2QjtBQUFBLE9FakhvRjtBQ0FyRixBQUFJLElBQUEsQ0FBQSxVQUFTLEVIb0hFLE1HcEhrQixBSG9IZCxDR3BIYztBQ0FqQztBQ0FBLGdCQUF3QjtBQUFFLHVCQUF3QjtJQUFFO0FDQXBELGFBQVMsQ0FBRyxLQUFHO0FBQUEsR0ZBUTtBTkVuQixDREZ1QyxDQUFDO0FHdU54QyIsImZpbGUiOiJjbGFzc2VzL1BvaW50LmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKCRfX3BsYWNlaG9sZGVyX18wLCAkX19wbGFjZWhvbGRlcl9fMSk7IiwiZnVuY3Rpb24oJF9fcGxhY2Vob2xkZXJfXzApIHtcbiAgICAgICRfX3BsYWNlaG9sZGVyX18xXG4gICAgfSIsInZhciAkX19wbGFjZWhvbGRlcl9fMCA9ICRfX3BsYWNlaG9sZGVyX18xIiwiY2xhc3MgUG9pbnQge1xuXG5cdGNvbnN0cnVjdG9yKCB4LCB5ICkge1xuXHRcdC8vIG5ldyBpcyBvcHRpb25hbCBpbiB0ZXN0c1xuXHRcdGlmICggISggdGhpcyBpbnN0YW5jZW9mIFBvaW50ICkgKSB7XG5cdFx0XHRyZXR1cm4gbmV3IFBvaW50KCB4LCB5ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB4ID09PSB1bmRlZmluZWQgfHzCoHggPT09IG51bGwgKSB7XG5cdFx0XHR0aGlzLmNvb3JkcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3gsIHldKTtcblxuXHRcdH0gZWxzZSBpZiAoIHguY29uc3RydWN0b3IgPT09IEFycmF5IHx8IHguY29uc3RydWN0b3IgPT09IEZsb2F0MzJBcnJheSApIHtcblx0XHRcdHRoaXMuY29vcmRzID0gbmV3IEZsb2F0MzJBcnJheSh4KTtcblxuXHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiAoICd4JyBpbiB4IHx8ICd5JyBpbiB4ICkgKSB7XG5cdFx0XHR0aGlzLmNvb3JkcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3gueCwgeC55XSk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jb29yZHMgPSBuZXcgRmxvYXQzMkFycmF5KFt4LCB5XSk7XG5cblx0XHR9XG5cdH1cblxuXHQvLyAueCBhbmQgLnkgYXJlIG1vcmUgY29udmVuaWVudCB0aGFuIC5jb29yZHNbMF0gYW5kIC5jb29yZHNbMV1cblx0Z2V0IHgoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY29vcmRzWzBdO1xuXHR9XG5cdHNldCB4KCB4ICkge1xuXHRcdHRoaXMuY29vcmRzWzBdID0geDtcblx0fVxuXHRnZXQgeSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jb29yZHNbMV07XG5cdH1cblx0c2V0IHkoIHkgKSB7XG5cdFx0dGhpcy5jb29yZHNbMV0gPSB5O1xuXHR9XG5cblx0Ly8gYSBzZXR0ZXIgZm9yIHgveSBjb29yZGluYXRlcyB0aGF0IGJlaGF2ZXMgZXhhY3RseSBsaWtlIHRoZSBjb25zdHJ1Y3RvclxuXHRfKHgsIHkpIHtcblx0XHRpZiAoIHggPT09IHVuZGVmaW5lZCB8fMKgeCA9PT0gbnVsbCApIHtcblx0XHRcdHRoaXMuY29vcmRzWzBdID0geDtcblx0XHRcdHRoaXMuY29vcmRzWzFdID0geTtcblxuXHRcdH0gZWxzZSBpZiAoIHguY29uc3RydWN0b3IgPT09IEFycmF5IHx8IHguY29uc3RydWN0b3IgPT09IEZsb2F0MzJBcnJheSApIHtcblx0XHRcdHRoaXMuY29vcmRzWzBdID0geFswXTtcblx0XHRcdHRoaXMuY29vcmRzWzFdID0geFsxXTtcblxuXHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiAoICd4JyBpbiB4IHx8ICd5JyBpbiB4ICkgKSB7XG5cdFx0XHR0aGlzLmNvb3Jkc1swXSA9IHgueDtcblx0XHRcdHRoaXMuY29vcmRzWzFdID0geC55O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29vcmRzWzBdID0geDtcblx0XHRcdHRoaXMuY29vcmRzWzFdID0geTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0dHJhbnNsYXRlKCB4LCB5ICkge1xuXHRcdHZhciBwID0geCBpbnN0YW5jZW9mIFBvaW50ID9cblx0XHRcdFx0eDpcblx0XHRcdFx0bmV3IFBvaW50KCB4LCB5ICk7XG5cblx0XHRpZiAoICFpc05hTiggcC5jb29yZHNbMF0gKSApIHtcblx0XHRcdHRoaXMuY29vcmRzWzBdICs9IHAuY29vcmRzWzBdO1xuXHRcdH1cblx0XHRpZiAoICFpc05hTiggcC5jb29yZHNbMV0gKSApIHtcblx0XHRcdHRoaXMuY29vcmRzWzFdICs9IHAuY29vcmRzWzFdO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0dHJhbnNsYXRlWCggeCApIHtcblx0XHR0aGlzLmNvb3Jkc1swXSArPSB4O1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0dHJhbnNsYXRlWSggeSApIHtcblx0XHR0aGlzLmNvb3Jkc1sxXSArPSB5O1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0dHJhbnNmb3JtKCBtLCBpc1JlY3Vyc2l2ZSApIHtcblx0XHR2YXIgY29vcmRzMCA9IHRoaXMuY29vcmRzWzBdO1xuXG5cdFx0aWYgKCBtLmNvbnN0cnVjdG9yID09PSBGbG9hdDMyQXJyYXkgKSB7XG5cdFx0XHR0aGlzLmNvb3Jkc1swXSA9IG1bMF0gKiBjb29yZHMwICsgbVsyXSAqIHRoaXMuY29vcmRzWzFdICsgbVs0XTtcblx0XHRcdHRoaXMuY29vcmRzWzFdID0gbVsxXSAqIGNvb3JkczAgKyBtWzNdICogdGhpcy5jb29yZHNbMV0gKyBtWzVdO1xuXG5cdFx0Ly8gYS5jb25zdHJ1Y3RvciA9PT0gU1ZHTWF0cml4XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29vcmRzWzBdID0gbS5hICogY29vcmRzMCArIG0uYyAqIHRoaXMuY29vcmRzWzFdICsgbS5lO1xuXHRcdFx0dGhpcy5jb29yZHNbMV0gPSBtLmIgKiBjb29yZHMwICsgbS5kICogdGhpcy5jb29yZHNbMV0gKyBtLmY7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc1JlY3Vyc2l2ZSAmJiB0aGlzLmNoaWxkcmVuICkge1xuXHRcdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKCBjaGlsZCA9PiBjaGlsZC50cmFuc2Zvcm0oIG0sIGlzUmVjdXJzaXZlICkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiAoIGlzTmFOKCB0aGlzLmNvb3Jkc1swXSApID8gJ05hTicgOiBNYXRoLnJvdW5kKCB0aGlzLmNvb3Jkc1swXSApICkgK1xuXHRcdFx0JyAnICtcblx0XHRcdCggaXNOYU4oIHRoaXMuY29vcmRzWzFdICkgPyAnTmFOJyA6IE1hdGgucm91bmQoIHRoaXMuY29vcmRzWzFdICkgKTtcblx0fVxuXG5cdHRvSlNPTigpIHtcblx0XHRyZXR1cm4gdGhpcy50b1N0cmluZygpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvaW50O1xuXG5cdC8vIFx0cmV0dXJuIFBvaW50O1xuXHQvLyB9KTtcblxuXHQvLyBzb21lIGZ1bmN0aW9ucyBuZWVkIHRvIGJlIGFkZGVkIHRvIHRoZSBwcm90b3R5cGUgYXQgcnVudGltZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5XG5cdC8qLnJ1bihmdW5jdGlvbihQb2ludCwgcG9pbnRPbikge1xuXHRcdFBvaW50LnByb3RvdHlwZS5vbiA9IHBvaW50T247XG5cdH0pXG5cblx0LmZhY3RvcnkoJ3BvaW50T24nLCBmdW5jdGlvbiggUG9pbnQsIGxpbmVMaW5lSW50ZXJzZWN0aW9uICkge1xuXHRcdC8vIHRoaXMgcmVnZXhwIGlzIGR1cGxpY2F0ZWQgaW4gU2VnbWVudC5qc1xuXHRcdHZhciByc3RyYWlnaHQgPSAvW0xWTUhdLztcblxuXHRcdHJldHVybiBmdW5jdGlvbiggYXJncyApIHtcblx0XHRcdHZhciBvcmlnaW4sXG5cdFx0XHRcdHZlY3RvcjtcblxuXHRcdFx0Ly8gaGFuZGxlIGNhc2VzIHdoZXJlIGFyZ3MgcmVmZXJzIHRvIHVuZGVmaW5lZCBkYXRhXG5cdFx0XHRpZiAoIGFyZ3MgPT09IHVuZGVmaW5lZCB8fCAoIGFyZ3MuY29uc3RydWN0b3IgPT09IEFycmF5ICYmICggYXJnc1swXSA9PT0gdW5kZWZpbmVkIHx8IGFyZ3NbMV0gPT09IHVuZGVmaW5lZCApICkgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBwb2ludCBvbiBhIHNlZ21lbnRcblx0XHRcdGlmICggIWlzTmFOKCB0aGlzLmNvb3Jkc1swXSApIHx8ICFpc05hTiggdGhpcy5jb29yZHNbMV0gKSApIHtcblxuXHRcdFx0XHQvLyBwb2ludCBvbiBhIHN0cmFpZ2h0IGxpbmVcblx0XHRcdFx0aWYgKCAoIGFyZ3MuY29tbWFuZCAhPT0gdW5kZWZpbmVkICYmIHJzdHJhaWdodC50ZXN0KGFyZ3MuY29tbWFuZCkgKSB8fFxuXHRcdFx0XHRcdGFyZ3MuY29uc3RydWN0b3IgPT09IEFycmF5ICkge1xuXHRcdFx0XHRcdC8vIHNlZ21lbnQgZnJvbSB0d28gcG9pbnRzXG5cdFx0XHRcdFx0aWYgKCBhcmdzLmNvbnN0cnVjdG9yID09PSBBcnJheSApIHtcblx0XHRcdFx0XHRcdG9yaWdpbiA9IGFyZ3NbMF07XG5cdFx0XHRcdFx0XHR2ZWN0b3IgPSBbXG5cdFx0XHRcdFx0XHRcdGFyZ3NbMV0ueCAtIGFyZ3NbMF0ueCxcblx0XHRcdFx0XHRcdFx0YXJnc1sxXS55IC0gYXJnc1swXS55XG5cdFx0XHRcdFx0XHRdO1xuXG5cdFx0XHRcdFx0Ly8gU2VnbWVudCBpbnN0YW5jZVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRvcmlnaW4gPSBhcmdzLnN0YXJ0O1xuXHRcdFx0XHRcdFx0dmVjdG9yID0gW1xuXHRcdFx0XHRcdFx0XHRhcmdzLmVuZC54IC0gYXJncy5zdGFydC54LFxuXHRcdFx0XHRcdFx0XHRhcmdzLmVuZC55IC0gYXJncy5zdGFydC55XG5cdFx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggdGhpcy5jb29yZHNbMF0gKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNvb3Jkc1sxXSA9ICggdGhpcy5jb29yZHNbMF0gLSBvcmlnaW4ueCApIC8gdmVjdG9yWzBdICogdmVjdG9yWzFdICsgb3JpZ2luLnk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuY29vcmRzWzBdID0gKCB0aGlzLmNvb3Jkc1sxXSAtIG9yaWdpbi55ICkgLyB2ZWN0b3JbMV0gKiB2ZWN0b3JbMF0gKyBvcmlnaW4ueDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBwb2ludCBvbiBhIGN1cnZlXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBpbnRlcnNlY3Rpb25cblx0XHRcdH0gZWxzZSBpZiAoIGFyZ3MuY29uc3RydWN0b3IgPT09IEFycmF5ICYmIGFyZ3MubGVuZ3RoID09PSAyICkge1xuXG5cdFx0XHRcdC8vIGxpbmUtbGluZSBpbnRlcnNlY3Rpb25cblx0XHRcdFx0aWYgKFx0KCBhcmdzWzBdLmNvbnN0cnVjdG9yID09PSBBcnJheSB8fCByc3RyYWlnaHQudGVzdChhcmdzWzBdLmNvbW1hbmQpICkgJiZcblx0XHRcdFx0XHRcdCggYXJnc1sxXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgfHwgcnN0cmFpZ2h0LnRlc3QoYXJnc1sxXS5jb21tYW5kKSApICkge1xuXG5cdFx0XHRcdFx0dmFyIHAxID0gYXJnc1swXS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgP1xuXHRcdFx0XHRcdFx0XHQoIGFyZ3NbMF1bMF0gaW5zdGFuY2VvZiBQb2ludCA/XG5cdFx0XHRcdFx0XHRcdFx0YXJnc1swXVswXTpcblx0XHRcdFx0XHRcdFx0XHRuZXcgUG9pbnQoIGFyZ3NbMF1bMF0gKSApOlxuXHRcdFx0XHRcdFx0XHRhcmdzWzBdLnN0YXJ0LFxuXHRcdFx0XHRcdFx0cDIgPSBhcmdzWzBdLmNvbnN0cnVjdG9yID09PSBBcnJheSA/XG5cdFx0XHRcdFx0XHRcdCggYXJnc1swXVsxXSBpbnN0YW5jZW9mIFBvaW50ID9cblx0XHRcdFx0XHRcdFx0XHRhcmdzWzBdWzFdOlxuXHRcdFx0XHRcdFx0XHRcdG5ldyBQb2ludCggYXJnc1swXVsxXSApICk6XG5cdFx0XHRcdFx0XHRcdGFyZ3NbMF0uZW5kLFxuXHRcdFx0XHRcdFx0cDMgPSBhcmdzWzFdLmNvbnN0cnVjdG9yID09PSBBcnJheSA/XG5cdFx0XHRcdFx0XHRcdCggYXJnc1sxXVswXSBpbnN0YW5jZW9mIFBvaW50ID9cblx0XHRcdFx0XHRcdFx0XHRhcmdzWzFdWzBdOlxuXHRcdFx0XHRcdFx0XHRcdG5ldyBQb2ludCggYXJnc1sxXVswXSApICk6XG5cdFx0XHRcdFx0XHRcdGFyZ3NbMV0uc3RhcnQsXG5cdFx0XHRcdFx0XHRwNCA9IGFyZ3NbMV0uY29uc3RydWN0b3IgPT09IEFycmF5ID9cblx0XHRcdFx0XHRcdFx0KCBhcmdzWzFdWzFdIGluc3RhbmNlb2YgUG9pbnQgP1xuXHRcdFx0XHRcdFx0XHRcdGFyZ3NbMV1bMV06XG5cdFx0XHRcdFx0XHRcdFx0bmV3IFBvaW50KCBhcmdzWzFdWzFdICkgKTpcblx0XHRcdFx0XHRcdFx0YXJnc1sxXS5lbmQ7XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fKCBsaW5lTGluZUludGVyc2VjdGlvbiggcDEsIHAyLCBwMywgcDQgKSApO1xuXG5cdFx0XHRcdC8vIGN1cnZlLWN1cnZlIGludGVyc2VjdGlvblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBhcmdzWzBdLmNvbW1hbmQgPT09ICdDJyAmJiBhcmdzWzFdLmNvbW1hbmQgPT09ICdDJyApIHtcblxuXHRcdFx0XHQvLyBsaW5lLWN1cnZlIG9yIGN1cnZlLWxpbmUgaW50ZXJzZWN0aW9uXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cdFx0fTtcblx0fSkqLyIsInZhciAkX19wbGFjZWhvbGRlcl9fMCA9ICRfX3BsYWNlaG9sZGVyX18xIiwiKCR0cmFjZXVyUnVudGltZS5jcmVhdGVDbGFzcykoJF9fcGxhY2Vob2xkZXJfXzAsICRfX3BsYWNlaG9sZGVyX18xLCAkX19wbGFjZWhvbGRlcl9fMikiLCJ2YXIgJF9fZGVmYXVsdCA9ICRfX3BsYWNlaG9sZGVyX18wIiwicmV0dXJuICRfX3BsYWNlaG9sZGVyX18wIiwiZ2V0ICRfX3BsYWNlaG9sZGVyX18wKCkgeyByZXR1cm4gJF9fcGxhY2Vob2xkZXJfXzE7IH0iLCJfX2VzTW9kdWxlOiB0cnVlIl19